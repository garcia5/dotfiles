#!/bin/zsh

function main() {
    local deleted
    deleted="$(git branch -vv | grep ': gone]' | awk '{print $1 }')"

    echo "${BLUE}Branches deleted upstream:${NC}"
    echo "$deleted"

    local input
    vared -p "Cleanup all? [Y/n] " -c input

    if [ "$input" = "n" ]; then
        return
    fi

    echo "$deleted" | xargs git branch -D
}

main
